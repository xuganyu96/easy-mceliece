MCELIECE348864HEADERS = mceliece348864/api.h \
						mceliece348864/benes.h \
						mceliece348864/bm.h \
						mceliece348864/controlbits.h \
						mceliece348864/crypto_hash.h \
						mceliece348864/crypto_kem.h \
						mceliece348864/crypto_kem_mceliece348864.h \
						mceliece348864/decrypt.h \
						mceliece348864/encrypt.h \
						mceliece348864/gf.h \
						mceliece348864/int32_sort.h \
						mceliece348864/keccak.h \
						mceliece348864/operations.h \
						mceliece348864/params.h \
						mceliece348864/pk_gen.h \
						mceliece348864/randombytes.h \
						mceliece348864/root.h \
						mceliece348864/sk_gen.h \
						mceliece348864/synd.h \
						mceliece348864/transpose.h \
						mceliece348864/uint64_sort.h \
						mceliece348864/util.h \
						mceliece348864/subroutines/crypto_declassify.h \
						mceliece348864/subroutines/crypto_int16.h \
						mceliece348864/subroutines/crypto_int32.h \
						mceliece348864/subroutines/crypto_uint16.h \
						mceliece348864/subroutines/crypto_uint32.h \
						mceliece348864/subroutines/crypto_uint64.h

MCELIECE348864SOURCES = mceliece348864/benes.c \
						mceliece348864/bm.c \
						mceliece348864/controlbits.c \
						mceliece348864/decrypt.c \
						mceliece348864/encrypt.c \
						mceliece348864/gf.c \
						mceliece348864/keccak.c \
						mceliece348864/operations.c \
						mceliece348864/pk_gen.c \
						mceliece348864/randombytes.c \
						mceliece348864/root.c \
						mceliece348864/sk_gen.c \
						mceliece348864/synd.c \
						mceliece348864/transpose.c \
						mceliece348864/util.c

MCELIECE460896HEADERS = mceliece460896/api.h \
						mceliece460896/benes.h \
						mceliece460896/bm.h \
						mceliece460896/controlbits.h \
						mceliece460896/crypto_hash.h \
						mceliece460896/crypto_kem.h \
						mceliece460896/crypto_kem_mceliece460896.h \
						mceliece460896/decrypt.h \
						mceliece460896/encrypt.h \
						mceliece460896/gf.h \
						mceliece460896/int32_sort.h \
						mceliece460896/keccak.h \
						mceliece460896/operations.h \
						mceliece460896/params.h \
						mceliece460896/pk_gen.h \
						mceliece460896/randombytes.h \
						mceliece460896/root.h \
						mceliece460896/sk_gen.h \
						mceliece460896/synd.h \
						mceliece460896/transpose.h \
						mceliece460896/uint64_sort.h \
						mceliece460896/util.h \
						mceliece460896/subroutines/crypto_declassify.h \
						mceliece460896/subroutines/crypto_int16.h \
						mceliece460896/subroutines/crypto_int32.h \
						mceliece460896/subroutines/crypto_uint16.h \
						mceliece460896/subroutines/crypto_uint32.h \
						mceliece460896/subroutines/crypto_uint64.h

MCELIECE460896SOURCES = mceliece460896/benes.c \
						mceliece460896/bm.c \
						mceliece460896/controlbits.c \
						mceliece460896/decrypt.c \
						mceliece460896/encrypt.c \
						mceliece460896/gf.c \
						mceliece460896/keccak.c \
						mceliece460896/operations.c \
						mceliece460896/pk_gen.c \
						mceliece460896/randombytes.c \
						mceliece460896/root.c \
						mceliece460896/sk_gen.c \
						mceliece460896/synd.c \
						mceliece460896/transpose.c \
						mceliece460896/util.c

MCELIECE6960119HEADERS = mceliece6960119/api.h \
						 mceliece6960119/benes.h \
						 mceliece6960119/bm.h \
						 mceliece6960119/controlbits.h \
						 mceliece6960119/crypto_hash.h \
						 mceliece6960119/crypto_kem.h \
						 mceliece6960119/crypto_kem_mceliece6960119.h \
						 mceliece6960119/decrypt.h \
						 mceliece6960119/encrypt.h \
						 mceliece6960119/gf.h \
						 mceliece6960119/int32_sort.h \
						 mceliece6960119/keccak.h \
						 mceliece6960119/operations.h \
						 mceliece6960119/params.h \
						 mceliece6960119/pk_gen.h \
						 mceliece6960119/randombytes.h \
						 mceliece6960119/root.h \
						 mceliece6960119/sk_gen.h \
						 mceliece6960119/synd.h \
						 mceliece6960119/transpose.h \
						 mceliece6960119/uint64_sort.h \
						 mceliece6960119/util.h \
						 mceliece6960119/subroutines/crypto_declassify.h \
						 mceliece6960119/subroutines/crypto_int16.h \
						 mceliece6960119/subroutines/crypto_int32.h \
						 mceliece6960119/subroutines/crypto_uint16.h \
						 mceliece6960119/subroutines/crypto_uint32.h \
						 mceliece6960119/subroutines/crypto_uint64.h

MCELIECE6960119SOURCES = mceliece6960119/benes.c \
						 mceliece6960119/bm.c \
						 mceliece6960119/controlbits.c \
						 mceliece6960119/decrypt.c \
						 mceliece6960119/encrypt.c \
						 mceliece6960119/gf.c \
						 mceliece6960119/keccak.c \
						 mceliece6960119/operations.c \
						 mceliece6960119/pk_gen.c \
						 mceliece6960119/randombytes.c \
						 mceliece6960119/root.c \
						 mceliece6960119/sk_gen.c \
						 mceliece6960119/synd.c \
						 mceliece6960119/transpose.c \
						 mceliece6960119/util.c

MCELIECE8192128HEADERS = mceliece8192128/api.h \
						 mceliece8192128/benes.h \
						 mceliece8192128/bm.h \
						 mceliece8192128/controlbits.h \
						 mceliece8192128/crypto_hash.h \
						 mceliece8192128/crypto_kem.h \
						 mceliece8192128/crypto_kem_mceliece8192128.h \
						 mceliece8192128/decrypt.h \
						 mceliece8192128/encrypt.h \
						 mceliece8192128/gf.h \
						 mceliece8192128/int32_sort.h \
						 mceliece8192128/keccak.h \
						 mceliece8192128/operations.h \
						 mceliece8192128/params.h \
						 mceliece8192128/pk_gen.h \
						 mceliece8192128/randombytes.h \
						 mceliece8192128/root.h \
						 mceliece8192128/sk_gen.h \
						 mceliece8192128/synd.h \
						 mceliece8192128/transpose.h \
						 mceliece8192128/uint64_sort.h \
						 mceliece8192128/util.h \
						 mceliece8192128/subroutines/crypto_declassify.h \
						 mceliece8192128/subroutines/crypto_int16.h \
						 mceliece8192128/subroutines/crypto_int32.h \
						 mceliece8192128/subroutines/crypto_uint16.h \
						 mceliece8192128/subroutines/crypto_uint32.h \
						 mceliece8192128/subroutines/crypto_uint64.h

MCELIECE8192128SOURCES = mceliece8192128/benes.c \
						 mceliece8192128/bm.c \
						 mceliece8192128/controlbits.c \
						 mceliece8192128/decrypt.c \
						 mceliece8192128/encrypt.c \
						 mceliece8192128/gf.c \
						 mceliece8192128/keccak.c \
						 mceliece8192128/operations.c \
						 mceliece8192128/pk_gen.c \
						 mceliece8192128/randombytes.c \
						 mceliece8192128/root.c \
						 mceliece8192128/sk_gen.c \
						 mceliece8192128/synd.c \
						 mceliece8192128/transpose.c \
						 mceliece8192128/util.c

EASYMCELIECEHEADERS = easy-mceliece/api.h \
					  easy-mceliece/benes.h \
					  easy-mceliece/bm.h \
					  easy-mceliece/controlbits.h \
					  easy-mceliece/crypto_hash.h \
					  easy-mceliece/crypto_kem.h \
					  easy-mceliece/decrypt.h \
					  easy-mceliece/encrypt.h \
					  easy-mceliece/gf.h \
					  easy-mceliece/int32_sort.h \
					  easy-mceliece/keccak.h \
					  easy-mceliece/operations.h \
					  easy-mceliece/params.h \
					  easy-mceliece/pk_gen.h \
					  easy-mceliece/randombytes.h \
					  easy-mceliece/root.h \
					  easy-mceliece/sk_gen.h \
					  easy-mceliece/synd.h \
					  easy-mceliece/transpose.h \
					  easy-mceliece/uint64_sort.h \
					  easy-mceliece/util.h \
					  easy-mceliece/subroutines/crypto_declassify.h \
					  easy-mceliece/subroutines/crypto_int16.h \
					  easy-mceliece/subroutines/crypto_int32.h \
					  easy-mceliece/subroutines/crypto_uint16.h \
					  easy-mceliece/subroutines/crypto_uint32.h \
					  easy-mceliece/subroutines/crypto_uint64.h

EASYMCELIECESOURCES = easy-mceliece/benes.c \
					  easy-mceliece/bm.c \
					  easy-mceliece/controlbits.c \
					  easy-mceliece/decrypt.c \
					  easy-mceliece/encrypt.c \
					  easy-mceliece/gf.c \
					  easy-mceliece/keccak.c \
					  easy-mceliece/operations.c \
					  easy-mceliece/pk_gen.c \
					  easy-mceliece/randombytes.c \
					  easy-mceliece/root.c \
					  easy-mceliece/sk_gen.c \
					  easy-mceliece/synd.c \
					  easy-mceliece/transpose.c \
					  easy-mceliece/util.c

CFLAGS += -O3

main: main.c
	$(CC) $(CFLAGS) $(LDFLAGS) -DMCELIECE_N=8192 $(EASYMCELIECE8192128SOURCES) main.c -o target/$@
	./target/main

tests: test_kem_correctness.c
	$(CC) $(CFLAGS) $(LDFLAGS) -DMCELIECE_N=3488 $(EASYMCELIECESOURCES) test_kem_correctness.c -o target/test_mceliece348864_correctness
	$(CC) $(CFLAGS) $(LDFLAGS) -DMCELIECE_N=4608 $(EASYMCELIECESOURCES) test_kem_correctness.c -o target/test_mceliece460896_correctness
	$(CC) $(CFLAGS) $(LDFLAGS) -DMCELIECE_N=6688 $(EASYMCELIECESOURCES) test_kem_correctness.c -o target/test_mceliece6688128_correctness
	$(CC) $(CFLAGS) $(LDFLAGS) -DMCELIECE_N=6960 $(EASYMCELIECESOURCES) test_kem_correctness.c -o target/test_mceliece6960119_correctness
	$(CC) $(CFLAGS) $(LDFLAGS) -DMCELIECE_N=8192 $(EASYMCELIECESOURCES) test_kem_correctness.c -o target/test_mceliece8192128_correctness
	./target/test_mceliece348864_correctness
	./target/test_mceliece460896_correctness
	./target/test_mceliece6688128_correctness
	./target/test_mceliece6960119_correctness
	./target/test_mceliece8192128_correctness

clean:
	$(RM) target/*
